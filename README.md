## Classifying Dutch municipalities into metropolitan areas using commute flows.

Economically speaking, a “city” is a labor market plus a housing market where the participants live. The standard way to model this is to assume a central concentration of economic activity with concentric rings of decreasing density around it, as households and industries trade off desirability of location against availability of land. The shape and extent of these circles depends on, among other things, local geography, the presence of other nearby centers of activity, transportation technology, and land use regulations. Since many effects (such as shocks to industries in which the center specializes, a housing crunch, or population changes) are shared across the “gravitational field” that the center is exerting, these areas are a useful unit for economic analysis. In economic geography they are called Metropolitan Areas, Commute-sheds, or Daily Urban Systems.

However, these areas often do not correspond nicely to administrative boundaries. Historical legacy, socio-cultural affiliations and a desire to balance administrative units in population can be reasons to depart from purely economic criteria. The Dutch governments COROP classification system is an attempt to create more economically focused metropolitan areas, but they are drawn quite small and never cut across provinces. This severs Almere from Amsterdam, Assen from Groningen, and Deventer, Zutphen and Apeldoorn from each other, despite strong cooperation between these municipalities on transport policy and urban governance. This project is an attempt to build a script to classify municipalities into metropolitan areas based on commute data from Dutch Statistics.

The R script downloads municipality level employment data from Dutch Statistics (CBS) and polygons describing municipal borders from PDOK. It calculates the total labor force resident in each municipality, and what fraction of that works in each other municipality. Next, it applies the following algorithm: for a top N and a threshold T (both user supplied), it sorts the municipalities by number of jobs and picks the top one (M). Then, it assigns M and every municipality where the strongest foreign commute flow is toward M and greater than T percent of the labor force. Next, pick the largest unassigned municipality as a new M, and repeat the process for the N largest unassigned municipalities. After terminating, it creates a map illustrating the classification just created.

The atttached .png is the example generated when the threshold is set to 10%, and the number of municipalities is set to 8. Have a look!
